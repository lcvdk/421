<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>421 super Game</title>
  <link rel="stylesheet" href="style.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@100;400;800&display=swap" rel="stylesheet">
</head>

<body>
  <div id="tableDeJeu">
    <h1 id="title421">Le 421</h1>
    <div id="playzone">
      <div id="topInfo">
        <div id="phase" style="color:rgb(255, 251, 0);font-size: 1em;"></div>
        <div id="pot"></div>
      </div>
        <div id="zoneCentrale">
          <div id="resultat">
            <div class="de"  id="de1"></div>
            <div class="de" id="de2"></div>
            <div class="de" id="de3"></div>
          </div>
          <div id="message"></div>
        </div>  
      <div>
      <div id="interaction">
        <button id="lanceDe">jouer</button>
      </div>

      <div id="interfaceJoueurs">

      </div>

        <div id="stock"></div>
      </div>
    </div>
  </div>



  <script>
    const jetsDeStock = []
    let potJetons = 21

    const btn = document.getElementById("lanceDe");
    const phase = document.getElementById("phase");
    const pot = document.getElementById("pot");
    const resultatDe1 = document.getElementById("de1");
    const resultatDe2 = document.getElementById("de2");
    const resultatDe3 = document.getElementById("de3");
    const message = document.getElementById("message")
    const afficheJetDestock = document.getElementById("stock");

    pot.innerHTML = `Jetons restants : <strong>${potJetons}</strong>`

    btn.addEventListener('click', () => {
      pot.style.display = 'inline'
      phase.innerHTML = "Phase de Charge"
      let resultatLance = charge(joueur1)
      resultatDe1.innerHTML = `<p>${resultatLance.de1}</p>`;
      resultatDe2.innerHTML = `<p>${resultatLance.de2}</p>`;
      resultatDe3.innerHTML = `<p>${resultatLance.de3}</p>`;

      let affichageInfo = `vous avez obtenu ${resultatLance.resultatTxt[0].name} qui vaut ${resultatLance.resultatTxt[0].nbJeton} jeton(s)`


      console.log("resLancé :", resultatLance)
      jetsDeStock.push(resultatLance.sortedCombo)
      // resultat.innerHTML = resultatLance.sortedCombo
      message.innerHTML = affichageInfo
      if (jetsDeStock) { afficheJetDestock.innerHTML = `Joué précédemment : ${jetsDeStock}` }

      console.log("jets DANS la fonction", jetsDeStock)

      potJetons -= resultatLance.resultatTxt[0].nbJeton
      if (potJetons <= 0) potJetons = 0

      pot.innerHTML = `Jetons restants : ${potJetons}`
    })


    console.log("jets OUT de la fonction", jetsDeStock)



  </script>
  <script src="combo.api.js"></script>
  <script src="main.js"></script>

</body>
<footer id="footer">by LcVdk </footer>

</html>